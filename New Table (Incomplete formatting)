CREATE TABLE Course(
	CourseID		CHAR(6) 			NOT NULL	CONSTRAINT PK_Course PRIMARY KEY CLUSTERED(CourseID)
,	CourseName		VARCHAR(40)			NOT NULL
,	"Hours"			SMALLINT			NOT NULL	CONSTRAINT CK_Hours			 CHECK("Hours" > 0)
,	NoOfStudents	SMALLINT			NOT NULL	CONSTRAINT CK_NoOfStudents	 CHECK(NoOfStudents > 0)
)

CREATE TABLE Student(
	StudentID		INT	IDENTITY(1,1)	NOT NULL	CONSTRAINT PK_Student PRIMARY KEY CLUSTERED(StudentID)
,	StudentFirst	VARCHAR(40)			NOT NULL
,	StudentLast		VARCHAR(40)			NOT NULL
,	GenderCode		CHAR(1)				NOT NULL	CONSTRAINT CK_GenderCode  CHECK(GenderCode LIKE '[M][F][X}')
,	"Address"		VARCHAR(30)			NOT NULL
,	BirthDate		DATETIME			NOT NULL
,	PostalCode		CHAR(6)				NOT NULL	CONSTRAINT CK_PostalCode  CHECK(PostalCode LIKE '[A-Z][0-9][A-Z][0-9][A-Z][0-9]'
,	AvgMark			DECIMAL(4,1)		NOT NULL	CONSTRAINT CK_AvgMark	  CHECK(AvgMark BETWEEN 0 AND 100)
,	NoOfCourses		SMALLINT			NOT NULL	CONSTRAINT CK_NoOfCourses CHECK(NoOfCourses >= 0) CONSTRAINT DF_DefaultNoOfCourses DEFAULT 0


)

CREATE TABLE Grade(
	StudentID		INT					NOT NULL	CONSTRAINT FK_GradeToStudent FOREIGN KEY(StudentID) REFERENCES Student(StudentID)
,	CourseID		CHAR(6)				NOT NULL	CONSTRAINT FK_GradeToCourse FOREIGN KEY(CourseID) REFERENCES Course(CourseID)
,	Mark			SMALLINT			NOT NULL	CONSTRAINT CK_Mark	  CHECK(Mark BETWEEN 0 AND 100)  CONSTRAINT DF_DefaultMark DEFAULT 0 

,	CONSTRAINT PK_Grade PRIMARY KEY CLUSTERED (StudentID, CourseID)  
)

CREATE TABLE Club(
	ClubID			INT IDENTITY(1,1)	NOT NULL	CONSTRAINT PK_Club PRIMARY KEY CLUSTERED (ClubID)
,	ClubName		VARCHAR(50)			NOT NULL	
)

CREATE TABLE Activity(
	StudentID		INT					NOT NULL	CONSTRAINT FK_ActivityToStudent FOREIGN KEY(StudentID) REFERENCES Student(StudentID)	
,	ClubID			INT					NOT NULL	CONSTRAINT FK_ActivityToClub FOREIGN KEY(ClubID) REFERENCES Club(ClubID)
	
,	CONSTRAINT PK_Activity PRIMARY KEY CLUSTERED(StudentID, ClubID)
)
